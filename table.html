<html>
    <body>
        <table border="1" id="table1">
            <thead>
                <th data-field="name">이름</th>
                <th data-field="address">주소</th>
                <th data-field="gender">성별</th>
                <th data-field="id">아이디</th>
                <th data-field="regData">가입일</th>
                <th data-field="btn">유저삭제</th>
                <th data-field="btnModify">유저수정</th>
            </thead>
            <tbody id="tb1"></tbody>
        </table>
        <div id="nodeDiv"></div>
    </body>
  
    <script>
        
        var tableObj = document.getElementById("table1"); //table
        var nodes = tableObj.childNodes; //table의 자식 => thead
        var divObj = document.getElementById("nodeDiv"); //테이블밖 div
        var thObj = nodes[1].childNodes; // thead의 자식 => tr
        var trObj = thObj[1].childNodes; // tr의 자식 => th들
        
        var keyStrs = new Array(); //keyStrs 라는 메모리를 만들고 
        for(var i=0;i<trObj.length;i++){ //th들을 있는대로 다 뽑아
            var tro = trObj[i]; // 뽑은것들을
            try{
                if(tro.getAttribute("data-field")!=null){ //데이터 field가 있을때
                    keyStrs[keyStrs.length] =            //
                    tro.getAttribute("data-field");
                }
            }catch(e){
            
            }
        }
        divObj.innerHTML += keyStrs;
        
        var tbList = {}; 
        tbList["id"] = "ljs7toto";
        tbList["name"] = "이지수";
        tbList["address"] = "서울";
        tbList["gender"] = "여자";
        tbList["regData"] = "2017-09-24";
        tbList["btn"] = "<input type='button' data-func='delete' value='삭제'>";
        tbList["btnModify"] = "<input type='button' data-func='modify' value='수정'>";

        var tbArray = new Array();
       
        tbArray[tbArray.length] = tbList; //기억해야되는 부분
        tbArray[tbArray.length] = tbList;
        var tb1Str = '';

        for(var j=0,jMax = tbArray.length;j<jMax;j++){
            var tbMap = tbArray[j];
            
            tb1Str += "<tr>";
            for(var i=0,max=keyStrs.length; i<max; i++){
                    tb1Str += "<td>";
                    if(!tbList[keyStrs[i]]){ //data-field가 정의 되어있지 않을경우
                        tb1Str += "-"
                    }else{
                        tb1Str += tbList[keyStrs[i]];
                    }
                    tb1Str += "</td>";
                }
            tb1Str +="</tr>";
        }

        var tbObj = document.getElementById("tb1");
        var inputObj = document.getElementsByTagName("input");

        // var testFuc = function(f){
        //     alert("테스트입니다.");
        // } //76처럼 해줘도 됨

        tbObj.innerHTML = tb1Str; //이벤트의 시점이 중요!

        for(var i=0, max = inputObj.length; i<max; i++){
            var iObj = inputObj[i];
            if (iObj.getAttribute("type")=="button") {
                iObj.onclick=function(){
                    // alert(this.value);
                    // if(this.value=="수정"){
                    //     alert("수정버튼클릭");
                    // }else if(this.value=="삭제"){
                    //     alert("삭제버튼클릭");
                    // }
                    if(this.getAttribute("data-func")=="delete"){
                        alert("삭제버튼클릭");
                    }else if(this.getAttribute("data-func")=="modify"){
                        alert("수정버튼클릭");
                    }
                }
            }
        }
        // tb1Str +="<tr>";
        // tb1Str += "<td>" + tbList["name"]+ "</td>";
        // tb1Str += "<td>" + tbList["address"]+ "</td>";
        // tb1Str += "<td>" + tbList["gender"]+ "</td>";
        // tb1Str += "<td>" + tbList["id"]+ "</td>";
        // tb1Str += "<td>" + tbList["regData"]+ "</td>";
        // tb1Str += "<td>" + tbList["btn"]+ "</td>";
        // tb1Str +="</tr>";
        // var tbObj = document.getElementById("tb1");
        // tbObj.innerHTML = tb1Str; 
        // alert(tableObj.getAttribute("id"));
    </script>
</html>